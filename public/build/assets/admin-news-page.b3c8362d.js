import{a as $}from"./main-layout.5d6e9a5b.js";import{k as C,m as D,q as T,r as v,o as u,e as f,a as s,h as n,b as r,p as y,s as g,v as w,n as S,w as _,F as k,d as h,l as N,x as V,c as E,j as M,t as b}from"./main.32d597a0.js";import{_ as q}from"./form-errors.fc7bb0a9.js";import{_ as B}from"./v-pagination.9c0f1cb0.js";const F=["checked"],O={class:"modal"},j={class:"modal-box bg-base-200"},A=["onSubmit"],I={class:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full"},L=h("\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),U=h("\u0421\u043E\u0437\u0434\u0430\u0442\u044C"),z=h("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C"),H={props:{config:{type:Object,default:{mode:null,id:null,header:"Testing header",content:"This is test of the news!",user_id:null}}},setup(p){const l=p;let e=C(!1);const t=D({mode:"",news_id:null,header:"",content:"",user_id:null});T(l.config,()=>{t.clearErrors(),e.value=!0,t.mode=l.config.mode,t.news_id=l.config.news_id,t.header=l.config.header,t.content=l.config.content,t.user_id=l.config.user_id});const d=()=>{e.value=!1},m=()=>{t.clearErrors(),t.post(route("news."+t.mode),{onSuccess:()=>{d()}})};return(i,a)=>{const c=v("v-switch");return u(),f(k,null,[s("input",{type:"checkbox",id:"news-modal",class:"modal-toggle",checked:n(e)},null,8,F),s("div",O,[s("div",j,[r(q,{form:n(t)},null,8,["form"]),s("form",{onSubmit:y(m,["prevent"])},[g(s("input",{type:"text",placeholder:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",class:"input input-bordered w-full mb-3","onUpdate:modelValue":a[0]||(a[0]=o=>n(t).header=o)},null,512),[[w,n(t).header]]),g(s("textarea",{class:"textarea textarea-bordered w-full mb-3",placeholder:"\u0422\u0435\u043A\u0441\u0442 \u043D\u043E\u0432\u043E\u0441\u0442\u0438","onUpdate:modelValue":a[1]||(a[1]=o=>n(t).content=o)},null,512),[[w,n(t).content]]),s("div",I,[s("button",{class:"btn btn-block",onClick:d},"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),s("button",{class:S([{"loading btn-disabled opacity-25":n(t).processing,"btn-error":n(t).mode=="delete","btn-success":n(t).mode=="create","btn-info":n(t).mode=="update"},"btn btn-block"]),type:"submit"},[r(c,{case:n(t).mode},{delete:_(()=>[L]),create:_(()=>[U]),update:_(()=>[z]),_:1},8,["case"])],2)])],40,A)])])],64)}}},R={class:"flex flex-col h-full"},G={class:"p-3"},J={class:"flex items-center"},K={class:"mr-auto"},P={class:"mx-3 text-accent-content"},Q=["onClick"],W=["onClick"],X={class:"mt-auto"},se={setup(p){const l=N(),e=V({trigger:null,mode:null,news_id:null,header:null,content:null,user_id:null}),t=()=>{e.trigger=Date.now(),e.mode="create",e.news_id=null,e.header=null,e.content=null,e.user_id=l.auth.user.id},d=(i,a,c,o)=>{e.trigger=Date.now(),e.mode="update",e.news_id=i,e.header=a,e.content=c,e.user_id=o},m=(i,a,c)=>{e.trigger=Date.now(),e.mode="delete",e.news_id=i,e.header=a,e.content=c,e.user_id=null};return(i,a)=>{const c=v("font-awesome-icon");return u(),E($,null,{default:_(()=>[s("div",R,[s("div",G,[s("button",{class:"btn btn-block btn-info",onClick:a[0]||(a[0]=o=>t())},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0441\u0442\u044C")]),(u(!0),f(k,null,M(n(l).news.data,o=>(u(),f("div",{key:o.id,class:"card mx-3 mb-1 p-3 bg-base-200"},[s("div",J,[s("div",K,b(o.header),1),s("div",null,b(i.$DateTime.fromISO(o.created_at).toLocaleString(i.$DateTime.DATETIME_SHORT)),1),s("div",P,b(o.user.username),1),s("button",{class:"btn btn-square btn-sm btn-info mx-1",onClick:x=>d(o.id,o.header,o.content,o.user_id)},[r(c,{icon:"pen-to-square"})],8,Q),s("button",{class:"btn btn-square btn-sm btn-error mx-1",onClick:x=>m(o.id,o.header,o.content)},[r(c,{icon:"times"})],8,W)])]))),128)),s("div",X,[r(B,{links:n(l).news.links},null,8,["links"])])]),r(H,{config:n(e)},null,8,["config"])]),_:1})}}};export{se as default};
